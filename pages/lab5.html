<!DOCTYPE html>
<html><head><title>lab 5</title>


  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <style>


    a.nav:link    {color:white; background-color:transparent; text-decoration:none}
    a.nav:visited {color:white; background-color:transparent; text-decoration:none}
    a.nav:hover   {color:#00ffff; background-color:transparent; text-decoration:none}
    a.nav:active  {color:white; background-color:transparent; text-decoration:none}

       #legend {
    position: relative;
    margin-left: 10px;
    width: 400px;
    height: 50px;
    margin-top: 10px;
    margin-left: 10px;
    margin-bottom: 10px;
}

#legendGradient {
    width: 100%;
    height: 15px;
    border: 1px solid black;
}

#legendText1 {
    width: 100%;
    height: 5px;
    position: relative;
    margin-top: 0px;
    margin-left: 2px;
    margin-right: 0px;
    margin-bottom: 15px;
    font-size: 1.0em;
    font-family: Arial;
}

#legendText2 {
    width: 100%;
    margin-top: 0px;
    position: relative;
    align-content: center;
    font-family: Arial;
    font-size: 1.0em;
}

  </style></head><body>

<table style="text-align: left; width: 80%; margin-left: auto; margin-right: auto; height: 852px;" border="0" cellpadding="2" cellspacing="2">

  <tbody>
    <tr>
      <td style="vertical-align: top; height: 1200px;">
      <table style="text-align: left; width: 1157px; height: 1196px;" border="0" cellpadding="2" cellspacing="2">
        <tbody>
          <tr>
            <td style="vertical-align: top; width: 124px; height: 120px;"><img style="width: 128px; height: 128px;" alt="" src="../images/location.png"><br>
            </td>
            <td style="vertical-align: top; width: 1013px; height: 120px;">
            <table style="text-align: left; width: 1007px; height: 172px;" border="0" cellpadding="2" cellspacing="2">
              <tbody>
                <tr>
                  <td style="vertical-align: top; width: 165px; text-align: center; height: 166px;"><big style="color: rgb(219, 29, 70);"><big><big><span style="font-family: Arial; font-weight: bold;">geog</span></big></big></big><big style="color: rgb(219, 29, 70);"><big><big><span style="font-family: Arial; font-weight: bold;"></span></big></big></big><br>
                  <big style="color: rgb(222, 77, 108);"><big><big><span style="font-family: Arial; font-weight: bold;">774</span></big></big></big><span style="font-family: Arial; font-weight: bold; color: rgb(219, 29, 70);"><br>
2017&nbsp; </span><span style="font-family: Arial; font-weight: bold; color: rgb(219, 29, 70);">|&nbsp;
                  </span><span style="font-family: Arial; font-weight: bold; color: rgb(219, 29, 70);">sem
2<br>
                  </span><span style="font-family: Arial; color: rgb(219, 29, 70);"><font size="-1">university
of auckland</font></span><span style="font-family: Arial; font-weight: bold; color: rgb(219, 29, 70);"><br>
                  </span> </td>
                  <td style="vertical-align: top; width: 822px; text-align: center; height: 166px;"><big style="color: rgb(219, 29, 70);"><big><big><span style="font-family: Arial; font-weight: bold;"><br>
                  </span></big></big></big>
                  <div style="text-align: center;"><big style="color: rgb(219, 29, 70);"><big><big><span style="font-family: Arial; font-weight: bold;">lab</span></big></big></big><big style="color: rgb(219, 29, 70);"><big><big><span style="font-family: Arial; font-weight: bold;"></span></big></big></big><big style="color: rgb(222, 77, 108);"><big><big><span style="font-family: Arial; font-weight: bold;"> 5</span></big></big></big><span style="font-family: Arial; font-weight: bold; color: rgb(219, 29, 70);"></span><big><big><span style="font-family: Arial; font-weight: bold; color: rgb(219, 29, 70);"><br>
mapping streaming data with the Google Maps API </span></big></big><big><big><span style="font-family: Arial; font-weight: bold;"></span></big></big><small><span style="font-family: Arial; font-weight: bold; color: rgb(219, 29, 70);"></span></small><br>
                  </div>
                  <span style="font-family: Arial; font-weight: bold; color: rgb(219, 29, 70);"></span></td>
                </tr>
              </tbody>
            </table>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top; width: 124px; height: 35px;"><br>
            </td>
            <td style="vertical-align: top; width: 1013px; height: 35px;">
            <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
              <tbody>
                <tr>
                  <td style="vertical-align: top; background-color: rgb(215, 37, 73);">
                  <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
                    <tbody>
                      <tr>
                        <td style="vertical-align: top; font-family: Arial; font-weight: bold; color: rgb(219, 29, 70); width: 120px;"><a class="nav" ;="" href="../index.html" target="_top"><span>home</span></a><br>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  </td>
                  <td style="vertical-align: top; background-color: rgb(215, 37, 73);">
                  <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
                    <tbody>
                      <tr>
                        <td style="vertical-align: top; font-family: Arial; font-weight: bold; color: rgb(219, 29, 70); width: 120px;"><a class="nav" ;="" href="lab2.html" target="_top"><span>lab 2</span></a><br>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  </td>
                  <td style="vertical-align: top; background-color: rgb(215, 37, 73);">
                  <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
                    <tbody>
                      <tr>
                        <td style="vertical-align: top; font-family: Arial; font-weight: bold; color: rgb(219, 29, 70); width: 120px;"><a class="nav" ;="" href="lab3.html" target="_top"><span>lab 3</span><br>
                        </a></td>
                      </tr>
                    </tbody>
                  </table>
                  </td>
                  <td style="vertical-align: top; background-color: rgb(215, 37, 73);">
                  <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
                    <tbody>
                      <tr>
                        <td style="vertical-align: top; font-family: Arial; font-weight: bold; color: rgb(219, 29, 70); width: 120px;"><a class="nav" ;="" href="lab4.html" target="_top"><span>lab 4</span><br>
                        </a></td>
                      </tr>
                    </tbody>
                  </table>
                  </td>
                  <td style="vertical-align: top; background-color: rgb(215, 37, 73); text-align: center;">
                  <table style="text-align: left; width: 100%; margin-left: auto; margin-right: auto;" border="0" cellpadding="2" cellspacing="2">
                    <tbody>
                      <tr>
                        <td style="vertical-align: top; font-family: Arial; font-weight: bold; color: rgb(219, 29, 70); width: 120px;"><a class="nav" ;="" href="lab5.html" target="_top"><span>lab 5</span><br>
                        </a></td>
                      </tr>
                    </tbody>
                  </table>
                  </td>
                </tr>
              </tbody>
            </table>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top; width: 124px; height: 12px;"><br>
            </td>
            <td style="vertical-align: top; width: 1013px; height: 12px;"><br>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top; width: 124px; height: 66px;"><br>
            </td>
            <td style="vertical-align: middle; width: 1013px; height: 66px; font-family: Arial; text-align: center;">
            <div style="text-align: center; height: 69px;"><big style="color: rgb(219, 29, 70);"><big><big><span style="font-family: Arial; font-weight: bold;">50 most recent earthquakes in New Zealand </span></big></big></big><br>
            <span style="font-family: Arial; color: rgb(219, 29, 70);"></span><br>
            <span style="font-family: Arial; font-weight: bold; color: rgb(219, 29, 70);"></span></div>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top; width: 124px; height: 1000px;"><br>
            </td>
            <td style="vertical-align: top; width: 1013px; height: 1000px;">


 <div id="legend">
    <div id="legendText1">0<span style="white-space:pre">                                 Magnitude                                  </span><span style="white-space:pre">4+</span></div><div id="legendGradient" style="background: -webkit-linear-gradient(left, rgba(255, 255, 255, 1), rgba(94, 188, 0, 1), rgba(191, 202, 0, 1), rgb(198, 187, 0), rgb(209, 134, 7), rgb(292, 97, 21), rgba(219, 70, 57, 1));"></div>
</div>

<div id="map" style="width: 100%; height: 830px;"></div>


     
    
    <script>
      var map, gradient;
      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: -41.049010, lng: 173.151528},
          zoom: 6,
          mapTypeId: 'satellite'
        });

var geoJSON = map.data.loadGeoJson(
      'http://wfs.geonet.org.nz/geonet/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=geonet:quake_search_v1&maxFeatures=50&outputFormat=json');

map.data.setStyle(styleFeature);

}

function styleFeature(feature) {
        var low = [151, 83, 34];   // color of magnitude 0.1
        var high = [5, 69, 54];  // color of magnitude 4 and above
        var minMagnitude = 0.1;
        var maxMagnitude = 4;

        // fraction represents where the value sits between the min and max
        var fraction = (Math.min(feature.getProperty('magnitude'), maxMagnitude) - minMagnitude) /
            (maxMagnitude - minMagnitude);

        var color = interpolateHsl(low, high, fraction);

        return {
          icon: {
            path: google.maps.SymbolPath.CIRCLE,
            strokeWeight: 0.5,
            strokeColor: '#fff',
            fillColor: color,
            fillOpacity: 2 / feature.getProperty('magnitude'),
            // while an exponent would technically be correct, quadratic looks nicer
            scale: Math.pow(feature.getProperty('magnitude'), 2)
          },
          zIndex: Math.floor(feature.getProperty('magnitude'))
        };
      }

      function interpolateHsl(lowHsl, highHsl, fraction) {
        var color = [];
        for (var i = 0; i < 3; i++) {
          // Calculate color based on the fraction.
          color[i] = (highHsl[i] - lowHsl[i]) * fraction + lowHsl[i];
        }

        return 'hsl(' + color[0] + ',' + color[1] + '%,' + color[2] + '%)';
      }

      var mapStyle = [{
        'featureType': 'all',
        'elementType': 'all',
        'stylers': [{'visibility': 'off'}]
      }, {
        'featureType': 'landscape',
        'elementType': 'geometry',
        'stylers': [{'visibility': 'on'}, {'color': '#fcfcfc'}]
      }, {
        'featureType': 'water',
        'elementType': 'labels',
        'stylers': [{'visibility': 'off'}]
      }, {
        'featureType': 'water',
        'elementType': 'geometry',
        'stylers': [{'visibility': 'on'}, {'hue': '#5f94ff'}, {'lightness': 60}]
      }];



    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA_6ExOH8IFUhylclqx04DeP7T_UqbrXgs&callback=initMap"
    async defer></script>





<br>
              <span style="font-family: Osaka">Data source: <a href="https://wfs.geonet.org.nz/">GeoNet Web Feature Service</a></span>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
  </tbody>
</table>

<br>

<br>
</body></html>
